# 一个完整的机器学习项目

### 数据处理

- 下载数据

- 查看数据结构

- 创建测试集

  - 测试集与训练集采用二八定率，测试数据占总数据集的20%

    - 特性：
      - 多次运行得到的测试集数据应该是保持一致的
      - 整体数据__更新__(增删)后测试集数据也应该保持一致

    - 纯随机的取样方法
      - 当数据集很大时（尤其是属性数相比），很适应
      - 当数据集不大，将会有__采样偏差的风险__

    - 分层采样法
      - 保证测试集具有__代表性__，减少采样偏差
      - 数据集中的每个分层都要有足够的实例位于你的数据中

### 数据探索和可视化、发现规律

- 数据可视化（地理数据）
  - 人类的大脑非常善于发现图片中的规律，但是需要调整可视化参数使规律显现出来

- 查找关联

  - 检测属性间相关系数
    - 方法一，corr()：

      - 计算出每对属性间的标准相关系数(称做__皮尔逊相关系数__)

        - 相关系数的范围是 -1 到 1。当接近 1 时，意味强正相关；
          - 例如，当收入中位数增加时，房价中位数也会增加。

        - 当相关系数接近 -1 时，意味强负相关；
        - 相关系数接近 0，意味没有线性相关性
        - 特性：
          - 相关系数只测量线性关系（如果`x`上升，`y`则上升或下降）
          - 可能会完全忽略非线性关系（例如，如果`x`接近 0，则`y`值会变高）
          - 相关系数等于 1 或 -1；这和斜率没有任何关系

    - 方法二，scatter_matrix()：

      - 画出每个数值属性对每个其它数值属性的图

  - 属性组合试验
    - 尝试多种属性组合创建新的属性
    - 目的：快速发现规律，以得到一个合理的原型。一但得到一个原型，并运行起来，分析它的输出，进而发现更多的规律

### 为机器学习算法准备数据

- 不要手工来做，需要写一些函数，理由如下：
  - 函数可以让你在任何数据集上（比如，你下一次获取的是一个新的数据集）方便地进行重复数据转换。
  - 你能慢慢建立一个转换函数库，可以在未来的项目中复用。
  - 在将数据传给算法之前，你可以在实时系统中使用这些函数。
  - 这可以让你方便地尝试多种数据转换，查看哪些转换方法结合起来效果最好。

- 数据清洗

  - 处理__训练集__与__测试集__中的特征缺失问题（创建函数来处理）
    - 去掉对应的数据
    - 去掉整个属性
    - 进行赋值（用0、平均值、中位数等等填充）

  - 处理文本和类别属性

    - 首先，将文本分类转换到整数类

    - 接着，使用__独热编码__将整数分类转换到独热向量

- 自定义转换器
  - 需要让自制的转换器与 Scikit-Learn 组件无缝衔接工作，它依赖__鸭子类型__而非继承
    - 需执行fit()，transform(),和fit_transform()
    - 可继承TransformerMixin,BaseEstimator

- 特征缩放
  - 数据要做的最重要转换之一
  - 当输入的__数值属性量度__不同时，机器学习算法的性能都不会好
  - 让属性有相同量度的方法为：
    - 线性函数归一化（Min-Max scaling）：
      - 值被转变、重新缩放，直到范围变成0到1
      - 减去最小值，然后再除以最大值与最小值的差值，来进行归一化
      - Scikit-Learn 提供了一个转换器`MinMaxScaler`来实现这个功能
    - 标准化（standardization）
      - 计算过程：首先减去平均值（标准化值的平均值总是 0），然后除以方差，使得到的分布具有单位方差
      - 不会限定值到某个特定的范围，这对某些算法可能构成问题（比如，神经网络常需要输入值得范围是 0 到 1）
      - 标准化受到异常值的影响很小
      - Scikit-Learn 提供了一个转换器`StandardScaler`来进行标准化。

- 转换流水线（处理数值和类别属性的流水线）
  - 存在许多数据转换步骤，需要按一定的顺序执行
  - Scikit-Learn 提供了类`Pipeline`，来进行这一系列的转换。
  - Scikit-Learn 没有工具来处理 Pandas`DataFrame`，需要写一个简单的自定义转换器来做这项工作

### 选择并训练模型

在前面限定了问题、获得了数据、探索了数据、采样了一个测试集、写了自动化的转换流水线来清理和为算法准备数据。现在，你已经准备好选择并训练一个机器学习模型了。

- 在训练集上__训练模型__和__评估性能__ 
- 使用交叉验证做更佳的评估